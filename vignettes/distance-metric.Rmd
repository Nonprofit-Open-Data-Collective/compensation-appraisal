---
title: "HEOM Distance Metric"
output: html_notebook
---


## The HEOM Metric 

For measuring the distance between 2 organizations, we are using a Heterogeneous Euclidean Overlap Distance Metric for measuring the distance between 2 organizations. See equation 1 of the following paper: https://projecteuclid.org/journals/missouri-journal-of-mathematical-sciences/volume-22/issue-2/Heterogeneous-Distance-Measures-and-Nearest-Neighbor-Classification-in-an-Ecological/10.35834/mjms/1312233141.full 

The distance metric is as follows: 

Say there are $m$ chacteristics to compare and $n$ comparison orgs. Let $\boldsymbol{x}$ be the vector characteristics of the input organization and $\boldsymbol{y}_j$ be te vector characteristics of the comparison organization.

For each organization $j$, for $i$ in 1, ... , $m$: 

$$HEOM_i(x_i, y_{j,i}) = \begin{cases} 
\frac{|x_i  -\ y_{j,i}|}{range\{y_{j,i}\}} & \text{ if characteristic i is numeric } \\
s(x_i, y_{j,i}) & \text{ if characteristic i is state } \\
p(x_i, y_{j,i}) & \text{ if characteristic i is categrtorical that is not state}
\end{cases}$$

$$s(x_i, y_{j,i}) = \begin{cases} 
0 & \text{ if input organization and the comparison org are in the same state} \\
1/3 & \text{ if input organization and the comparison org are in the same cencus division} \\
2/3 &  \text{ if input organization and the comparison org are in neighbooring cencus regions} \\
1 & otherwise
\end{cases}$$


$$p(x_i, y_{j,i}) = \begin{cases} 
0 & \text{ if } x_i = y_{j,i} \\
\frac{\#(y_{j,i} \in \{\text{ soft match critera})\}}{n} & \text{if soft matching} \\
1 & \text{otherwise}
\end{cases}$$

Then, 

$$HEOM(\boldsymbol{x} , \boldsymbol{y}_j) = \frac{1}{m} \sum_{i=1}^m HEOM_i(x_i, y_{j,i}) $$


The census regions can be found here : https://www2.census.gov/geo/pdfs/maps-data/maps/reference/us_regdiv.pdf. We combined census region 1 and 2 to just be one region. 



## Example 








